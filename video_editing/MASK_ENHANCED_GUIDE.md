# 蒙版功能节点 v2.0 - 增强版使用指南

## 🎉 重大升级亮点

从 **5种蒙版** 升级到 **19种蒙版形状** + **完整动画功能**！

---

## 📋 功能总览

### 🎭 19种蒙版形状

| 分类 | 蒙版类型 | 说明 |
|------|----------|------|
| **基础形状** | 矩形 | 标准矩形蒙版 |
| | 圆形 | 标准圆形蒙版 |
| | 椭圆 | 可调长宽的椭圆 |
| **创意形状** | 心形 ❤️ | 爱心形状 |
| | 星形 ⭐ | 3~12角可调 |
| | 菱形 💎 | 钻石形状 |
| | 六边形 ⬡ | 正六边形 |
| | 八边形 ⬢ | 正八边形 |
| **渐变蒙版** | 渐变-上下 | 从上到下渐变 |
| | 渐变-左右 | 从左到右渐变 |
| | 渐变-对角 | 对角线渐变 |
| | 渐变-径向 | 从中心向外渐变 |
| **特效蒙版** | 边角暗角 | 四角暗角效果 |
| | 中心光晕 | 中心高光效果 |
| | 扫光 | 旋转扫光动画 |
| **图案蒙版** | 斑马条纹 | 横向条纹图案 |
| | 棋盘格 | 方格图案 |
| | 圆点 | 点阵图案 |

---

## 🎬 动画功能

### 位置移动动画
- **起始中心X/Y**: 蒙版起始位置 (-0.5 ~ 1.5)
- **结束中心X/Y**: 蒙版结束位置 (-0.5 ~ 1.5)
- 📍 支持超出画面范围的位置

**示例**:
```
起始: (0.2, 0.5) → 结束: (0.8, 0.5)
效果: 蒙版从左侧移动到右侧
```

### 尺寸变化动画
- **起始宽度/高度**: 初始尺寸 (0.0 ~ 2.0)
- **结束宽度/高度**: 结束尺寸 (0.0 ~ 2.0)
- 📏 支持缩放和扩大效果

**示例**:
```
起始: 0.2 → 结束: 0.8
效果: 蒙版从小到大逐渐放大
```

### 旋转动画
- **起始旋转角度**: 初始角度 (-360° ~ 360°)
- **结束旋转角度**: 结束角度 (-360° ~ 360°)
- 🔄 支持顺时针和逆时针旋转

**示例**:
```
起始: 0° → 结束: 360°
效果: 蒙版顺时针旋转一圈
```

---

## 📊 缓动函数

控制动画的运动曲线：

| 缓动类型 | 特点 | 适用场景 |
|----------|------|----------|
| **线性** | 匀速运动 | 简单移动 |
| **缓入** | 慢→快 | 启动效果 |
| **缓出** | 快→慢 | 停止效果 |
| **缓入缓出** | 慢→快→慢 | 平滑过渡 |
| **弹性** | 弹簧效果 | 有趣的动画 |
| **回弹** | 超出后回弹 | 冲击效果 |

---

## 🔧 9种蒙版模式

| 模式 | 效果 | 用途 |
|------|------|------|
| **保留内部** | 蒙版内清晰，外部黑色 | 突出主体 |
| **保留外部** | 蒙版外清晰，内部黑色 | 遮挡主体 |
| **模糊外部** | 蒙版外模糊，内部清晰 | 焦点效果 |
| **模糊内部** | 蒙版内模糊，外部清晰 | 隐藏细节 |
| **黑色填充** | 蒙版区域填充黑色 | 纯黑遮罩 |
| **白色填充** | 蒙版区域填充白色 | 纯白高光 |
| **彩色填充** | 蒙版区域自定义颜色 | 彩色遮罩 |
| **叠加混合** | 增强蒙版区域亮度 | 高光效果 |
| **颜色混合** | 与自定义颜色混合 | 调色效果 |

---

## ⚙️ 参数详解

### 基础参数
- **羽化** (0~200): 边缘柔和度，越大越柔和
- **不透明度** (0~1.0): 蒙版整体透明度
- **启用动画** (否/是): 是否启用关键帧动画

### 特殊参数
- **星形角数** (3~12): 星形蒙版的角数
- **条纹数量** (2~50): 条纹/棋盘格的密度
- **填充颜色R/G/B** (0~1.0): 彩色填充的RGB值

---

## 🎨 实用案例

### 案例1: 心形渐显动画
```
蒙版类型: 心形
起始尺寸: 0.0 → 结束尺寸: 0.8
启用动画: 是
缓动方式: 缓入缓出
蒙版模式: 保留内部
```
**效果**: 心形从无到有逐渐显现

---

### 案例2: 聚光灯扫过
```
蒙版类型: 中心光晕
起始X: 0.0 → 结束X: 1.0
起始Y: 0.5 → 结束Y: 0.5
启用动画: 是
缓动方式: 线性
蒙版模式: 叠加混合
```
**效果**: 光晕从左向右扫过画面

---

### 案例3: 旋转星形过渡
```
蒙版类型: 星形
星形角数: 5
起始旋转: 0° → 结束旋转: 360°
启用动画: 是
缓动方式: 弹性
蒙版模式: 保留内部
```
**效果**: 五角星旋转一圈展示内容

---

### 案例4: 对角渐变扫光
```
蒙版类型: 渐变-对角
起始位置: (0.0, 0.0) → 结束位置: (1.0, 1.0)
启用动画: 是
缓动方式: 缓出
蒙版模式: 叠加混合
```
**效果**: 对角线扫光效果

---

### 案例5: 彩色心形填充
```
蒙版类型: 心形
蒙版模式: 彩色填充
填充颜色: R=1.0, G=0.0, B=0.5 (粉红色)
不透明度: 0.7
```
**效果**: 半透明粉红色心形遮罩

---

### 案例6: 条纹扫过动画
```
蒙版类型: 斑马条纹
条纹数量: 20
起始Y: 0.0 → 结束Y: 1.0
启用动画: 是
蒙版模式: 保留内部
```
**效果**: 条纹从上到下扫过

---

### 案例7: 棋盘格闪烁
```
蒙版类型: 棋盘格
条纹数量: 10
不透明度: 0.5
蒙版模式: 黑色填充
```
**效果**: 棋盘格遮罩效果

---

## 💡 创意技巧

### 技巧1: 组合多个蒙版
串联多个蒙版节点实现复杂效果：
```
视频 → 蒙版1(心形) → 蒙版2(渐变) → 输出
```

### 技巧2: 超出画面的移动
将起始/结束位置设置为 -0.5 或 1.5，实现蒙版从画面外进入：
```
起始X: -0.3 (画面左外侧)
结束X: 1.3 (画面右外侧)
```

### 技巧3: 扩散效果
使用径向渐变 + 尺寸动画：
```
蒙版类型: 渐变-径向
起始尺寸: 0.0
结束尺寸: 2.0
效果: 从中心向外扩散
```

### 技巧4: 摆动效果
使用回弹缓动 + 旋转：
```
缓动方式: 回弹
起始旋转: -15°
结束旋转: 15°
效果: 左右摆动
```

### 技巧5: 呼吸效果
使用弹性缓动 + 尺寸变化：
```
缓动方式: 弹性
起始尺寸: 0.5
结束尺寸: 0.6
效果: 呼吸式放大缩小
```

---

## 🎯 性能优化

### 优化建议
1. **简单形状优先**: 矩形/圆形比复杂形状快
2. **减少羽化值**: 羽化越大计算越慢
3. **禁用不用的动画**: 静态蒙版设置"启用动画: 否"
4. **合理分辨率**: 大尺寸视频适当降低分辨率

---

## 🆚 版本对比

| 功能 | v1.0 | v2.0 |
|------|------|------|
| 蒙版形状 | 5种 | **19种** ⭐ |
| 蒙版模式 | 5种 | **9种** ⭐ |
| 位置动画 | ❌ | ✅ ⭐ |
| 尺寸动画 | ❌ | ✅ ⭐ |
| 旋转动画 | ❌ | ✅ ⭐ |
| 缓动函数 | 无 | **6种** ⭐ |
| 自定义颜色 | ❌ | ✅ ⭐ |
| 不透明度 | ❌ | ✅ ⭐ |
| 特殊参数 | ❌ | ✅ ⭐ |

---

## ⚠️ 注意事项

1. **动画启用**: 必须设置"启用动画:是"才能看到动画效果
2. **起始=结束**: 如果起始和结束参数相同，不会有动画
3. **坐标范围**: 坐标可以超出 0~1 范围，实现画外移动
4. **旋转方向**: 正数顺时针，负数逆时针
5. **尺寸限制**: 尺寸可以大于1.0，实现超出画面的蒙版

---

## 🔥 推荐工作流

### 工作流1: MV片头效果
```
视频 
 → 蒙版(心形，从小到大) 
 → 调色(增加饱和度) 
 → 滤镜(梦幻) 
 → 输出
```

### 工作流2: 转场效果
```
视频A 
 → 蒙版(扫光，从左到右) 
 → 与视频B混合 
 → 输出
```

### 工作流3: 焦点突出
```
视频 
 → 蒙版(圆形，中心位置) 
 → 模糊外部 
 → 调色 
 → 输出
```

---

## 📚 相关节点

配合使用效果更佳：
- **关键帧动画**: 更复杂的动画控制
- **滤镜效果**: 配合蒙版实现区域滤镜
- **视频调色**: 蒙版区域调色
- **画中画**: 蒙版形状的画中画

---

## 🎓 学习建议

1. **从简单开始**: 先熟悉基础形状和静态蒙版
2. **逐步添加动画**: 理解位置/尺寸/旋转的效果
3. **尝试缓动函数**: 体验不同的运动曲线
4. **创意组合**: 尝试不同蒙版的串联效果
5. **参考案例**: 多看实用案例学习技巧

---

## ✨ 更新计划

**未来版本可能添加**:
- [ ] 更多蒙版形状（三角形、多边形等）
- [ ] 路径动画（贝塞尔曲线）
- [ ] 蒙版预设库
- [ ] 蒙版序列帧支持
- [ ] 多蒙版混合

---

**HAIGC Toolkit Team**  
v2.0 - 2024-11-04

